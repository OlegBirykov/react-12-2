{"version":3,"sources":["actions/actionTypes.js","actions/actionCreators.js","components/List.js","components/Details.js","App.js","serviceWorker.js","reducers/list.js","reducers/details.js","store/index.js","epics/index.js","index.js"],"names":["LIST_REQUEST","LIST_FAILURE","LIST_SUCCESS","DETAILS_REQUEST","DETAILS_FAILURE","DETAILS_SUCCESS","listRequest","type","detailsRequest","id","payload","List","useSelector","state","list","items","loading","error","dispatch","useDispatch","useEffect","className","onClick","viewBox","cx","cy","r","fill","map","o","to","process","name","price","Details","props","match","details","item","params","disabled","value","content","App","path","component","Boolean","window","location","hostname","initialState","reducer","combineReducers","action","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","epic","combineEpics","action$","pipe","ofType","switchMap","ajax","getJSON","retry","catchError","e","of","xhr","statusText","epicMiddleware","createEpicMiddleware","store","createStore","applyMiddleware","run","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.0dccc19e.chunk.js","sourcesContent":["export const LIST_REQUEST = 'LIST_REQUEST';\nexport const LIST_FAILURE = 'LIST_FAILURE';\nexport const LIST_SUCCESS = 'LIST_SUCCESS';\n\nexport const DETAILS_REQUEST = 'DETAILS_REQUEST';\nexport const DETAILS_FAILURE = 'DETAILS_FAILURE';\nexport const DETAILS_SUCCESS = 'DETAILS_SUCCESS';\n","import {\n  LIST_REQUEST,\n  LIST_FAILURE,\n  LIST_SUCCESS,\n  DETAILS_REQUEST,\n  DETAILS_FAILURE,\n  DETAILS_SUCCESS,\n} from './actionTypes';\n\nexport const listRequest = () => ({\n  type: LIST_REQUEST,\n});\n\nexport const listFailure = error => ({\n  type: LIST_FAILURE,\n  payload: { error },\n});\n\nexport const listSuccess = items => ({\n  type: LIST_SUCCESS,\n  payload: { items },\n});\n\nexport const detailsRequest = id => ({\n  type: DETAILS_REQUEST,\n  payload: { id },\n});\n\nexport const detailsFailure = error => ({\n  type: DETAILS_FAILURE,\n  payload: { error },\n});\n\nexport const detailsSuccess = item => ({\n  type: DETAILS_SUCCESS,\n  payload: { item },\n});\n","import { useEffect } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { Link } from 'react-router-dom';\nimport { listRequest } from '../actions/actionCreators';\n\nfunction List() {\n  const { items, loading, error } = useSelector(state => state.list);\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    dispatch(listRequest());\n  }, [dispatch]);\n\n  const handleError = () => {\n    dispatch(listRequest());\n  }\n  \n  if (error) {\n    return (\n      <div className=\"error\">\n        <p className=\"error-text\">{error}</p>\n        <button className=\"error-button\" onClick={handleError}>Повторить запрос</button>\n      </div>\n    );\n  }\n\n  if (loading) {\n    return (\n      <svg className=\"spinner\" viewBox=\"0 0 50 50\">\n        <circle className=\"spinner-circle ServiceList-spinner-circle\" cx=\"25\" cy=\"25\" r=\"20\" fill=\"none\"></circle>\n      </svg>\n    );\n  }\n\n  return (\n    <ul className=\"List\">\n      {items.map(o => (\n        <li className=\"List-item\" key={o.id}>\n          <Link to={`${process.env.PUBLIC_URL}/${o.id}/details`} className=\"List-item-link\">\n            {`${o.name}: ${o.price} руб.`}\n          </Link>\n        </li>\n      ))}\n    </ul>\n  );\n}\n\nexport default List;\n","import {useEffect} from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { Link } from 'react-router-dom';\nimport { detailsRequest } from '../actions/actionCreators';\n\nfunction Details(props) {\n  const { match } = props;\n  const { item, loading, error } = useSelector(state => state.details);\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    dispatch(detailsRequest(match.params.id));\n  }, [dispatch, match.params.id]);\n\n  const handleError = () => {\n    dispatch(detailsRequest(match.params.id));\n  }\n\n  if (error) {\n    return (\n      <div className=\"error\">\n        <p className=\"error-text\">{error}</p>\n        <button className=\"error-button\" onClick={handleError}>Повторить запрос</button>\n      </div>\n    )\n  }\n\n  if (loading) {\n    return (\n      <svg className=\"spinner\" viewBox=\"0 0 50 50\">\n        <circle className=\"spinner-circle ServiceList-spinner-circle\" cx=\"25\" cy=\"25\" r=\"20\" fill=\"none\"></circle>\n      </svg>\n    );\n  }\n\n  return (\n    <div className=\"Details\">\n      <label>\n        Название\n        <input name='name' disabled value={item.name} />\n      </label>\n      <label>\n        Стоимость\n        <input name='price' disabled value={item.price} />\n      </label>\n      <label>\n        Описание\n        <input name='content' disabled value={item.content} />\n      </label>\n      <div className=\"Details-footer\">\n        <Link to={process.env.PUBLIC_URL} className=\"Details-button\">\n          {'<< Назад к списку'}\n        </Link>\n      </div>\n    </div>\n  );\n}\n\nexport default Details;\n","import { BrowserRouter as Router, Switch, Route, Redirect } from 'react-router-dom';\nimport './App.css';\nimport List from './components/List';\nimport Details from './components/Details';\n\nfunction App() { \n  return (\n    <Router>\n      <div className=\"App\">\n        <Switch>\n          <Route path={process.env.PUBLIC_URL + '/:id([0-9]+)/details'} component={Details} />\n          <Route path={process.env.PUBLIC_URL} component={List} />\n          <Redirect to={process.env.PUBLIC_URL} />\n        </Switch>\n      </div>\n    </Router>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import {\n  LIST_REQUEST,\n  LIST_FAILURE,\n  LIST_SUCCESS,\n} from '../actions/actionTypes'\n\nconst initialState = {\n  items: [],\n  loading: false,\n  error: null,\n};\n\nexport default function listReducer(state = initialState, action) {\n  switch (action.type) {\n    case LIST_REQUEST:\n      return {\n        ...state,\n        loading: true,\n        error: null,\n      };\n      \n    case LIST_FAILURE:\n      const { error } = action.payload;\n      return {\n        ...state,\n        loading: false,\n        error,\n      };\n      \n    case LIST_SUCCESS:\n      const { items } = action.payload;\n      return {\n        ...state,\n        items,\n        loading: false,\n        error: null,\n      };\n    \n    default:\n      return state;\n  }\n}\n","import {\n  DETAILS_REQUEST,\n  DETAILS_FAILURE,\n  DETAILS_SUCCESS,\n} from '../actions/actionTypes'\n\nconst initialState = {\n  item: { id: '', name: '', price: '', content: '' },\n  loading: false,\n  error: null,\n};\n\nexport default function detailReducer(state = initialState, action) {\n  switch (action.type) {\n    case DETAILS_REQUEST:\n      return {\n        ...state,\n        loading: true,\n        error: null,\n      };\n      \n    case DETAILS_FAILURE:\n      const { error } = action.payload;\n      return {\n        ...state,\n        loading: false,\n        error,\n      };\n      \n    case DETAILS_SUCCESS:\n      const { item } = action.payload;\n      return {\n        ...state,\n        item,\n        loading: false,\n        error: null,\n      };\n    \n    default:\n      return state;\n  }\n}\n","import { createStore, combineReducers, applyMiddleware, compose } from 'redux';\nimport { combineEpics, createEpicMiddleware } from 'redux-observable';\nimport listReducer from '../reducers/list';\nimport detailsReducer from '../reducers/details';\nimport { listRequestEpic, detailsRequestEpic } from '../epics';\n\nconst reducer = combineReducers({\n  list: listReducer,\n  details: detailsReducer,\n});\n\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\n\nconst epic = combineEpics(\n  listRequestEpic,\n  detailsRequestEpic,\n);\n\nconst epicMiddleware = createEpicMiddleware();\n\nconst store = createStore(reducer, composeEnhancers(\n  applyMiddleware(epicMiddleware)\n));\n\n\nepicMiddleware.run(epic);\n\nexport default store;\n","import { ofType } from 'redux-observable';\nimport { ajax } from 'rxjs/ajax';\nimport { map, retry, switchMap, catchError } from 'rxjs/operators';\nimport { LIST_REQUEST, DETAILS_REQUEST } from '../actions/actionTypes';\nimport { listSuccess, listFailure, detailsSuccess, detailsFailure } from '../actions/actionCreators';\nimport { of } from 'rxjs';\n\nexport const listRequestEpic = action$ => action$.pipe(\n  ofType(LIST_REQUEST), \n  switchMap(() => ajax.getJSON(process.env.REACT_APP_SERVICES_URL).pipe(\n    retry(3),\n    map(o => listSuccess(o)),\n    catchError(e => of(listFailure(e.xhr.statusText ? e.xhr.statusText : 'No Connecting'))),\n  )),\n)\n\nexport const detailsRequestEpic = action$ => action$.pipe(\n  ofType(DETAILS_REQUEST),\n  switchMap(o => ajax.getJSON(`${process.env.REACT_APP_SERVICES_URL}/${o.payload.id}`).pipe(\n    retry(3),\n    map(o => detailsSuccess(o)),\n    catchError(e => of(detailsFailure(e.xhr.statusText ? e.xhr.statusText : 'No Connecting'))),\n  )),\n);\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport store from './store';\nimport { Provider } from 'react-redux';\n\nReactDOM.render(<Provider store={store}><App /></Provider>, document.getElementById('root'));\n\nserviceWorker.unregister();\n"],"sourceRoot":""}